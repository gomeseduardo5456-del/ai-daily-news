<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ–°é—»é€Ÿé€’</title>
    <style>
        :root { --primary: #007AFF; --bg: #F2F2F7; --card: #FFFFFF; --text: #1C1C1E; --sub: #8E8E93; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 16px; line-height: 1.5; }
        .header { margin-bottom: 25px; }
        .filter-bar { background: var(--card); padding: 12px; border-radius: 12px; display: flex; align-items: center; gap: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        select { border: 1px solid #DDD; padding: 8px; border-radius: 8px; flex-grow: 1; outline: none; background: #FFF; }
        .region-tag { display: inline-block; background: var(--primary); color: white; padding: 4px 12px; border-radius: 20px; font-size: 13px; font-weight: bold; margin: 20px 0 10px; }
        .news-card { background: var(--card); border-radius: 16px; padding: 16px; margin-bottom: 12px; display: block; text-decoration: none; color: inherit; box-shadow: 0 2px 6px rgba(0,0,0,0.04); }
        .news-topic { font-size: 12px; color: var(--primary); font-weight: 600; margin-bottom: 4px; display: block; }
        .news-title { font-size: 17px; font-weight: 700; margin-bottom: 6px; display: block; }
        .news-summary { font-size: 14px; color: #444; margin: 0; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
        .loading { text-align: center; margin-top: 60px; color: var(--sub); }
    </style>
</head>
<body>

<div class="header">
    <h1>ğŸ“¢ AI æ–°é—»é€Ÿé€’</h1>
    <div class="filter-bar">
        <span>é€‰æ‹©æ—¥æœŸï¼š</span>
        <select id="datePicker" onchange="displayNews()"><option>åŒæ­¥ä¸­...</option></select>
    </div>
</div>

<div id="content"><div class="loading">æ­£åœ¨åŠ è½½æ•°æ®...</div></div>

<script>
    // ğŸ’¡ å…³é”®ï¼šè¯·æŠŠä¸‹é¢å¼•å·é‡Œçš„å†…å®¹æ¢æˆä½ æˆªå›¾é‡Œé‚£ä¸ªä»¥ /pubhtml ç»“å°¾çš„é“¾æ¥
    const FINAL_PUB_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR6C8zKnTexdzjZ3ZkewQbK46bPx82e0OQlsxRXM_jn8fTEc_5zXwR-Xv5aS9uT9gnBvAD-6yLhBgb4/pubhtml';
    
    // è‡ªåŠ¨å°†ç½‘é¡µé“¾æ¥è½¬æ¢ä¸ºæ•°æ®æ¥å£é“¾æ¥
    const DATA_URL = FINAL_PUB_URL.replace('/pubhtml', '/pub?output=csv');

    let allNews = [];

    async function fetchNews() {
        try {
            const response = await fetch(DATA_URL);
            const csvText = await response.text();
            
            // è§£æ CSV é€»è¾‘
            const rows = csvText.split('\n').map(row => {
                // å¤„ç† CSV å•å…ƒæ ¼ä¸­çš„é€—å·é—®é¢˜
                return row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(c => c.replace(/^"|"$/g, '').trim());
            }).slice(1); 

            allNews = rows.map(cols => ({
                date: cols[0], region: cols[1], topic: cols[2], company: cols[3],
                title: cols[4], summary: cols[5], source: cols[6], link: cols[7]
            })).filter(n => n.date && n.title);

            const picker = document.getElementById('datePicker');
            const dates = [...new Set(allNews.map(n => n.date))].sort().reverse();
            picker